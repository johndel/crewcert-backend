test:
  service: Disk
  root: <%= Rails.root.join("tmp/storage") %>

local:
  service: Disk
  root: <%= Rails.root.join("storage") %>

# Cloudflare R2 (S3-compatible)
cloudflare:
  service: S3
  access_key_id: <%= Rails.application.credentials.dig(:r2, :access_key_id) || ENV["R2_ACCESS_KEY_ID"] %>
  secret_access_key: <%= Rails.application.credentials.dig(:r2, :secret_access_key) || ENV["R2_SECRET_ACCESS_KEY"] %>
  endpoint: <%= Rails.application.credentials.dig(:r2, :endpoint) || ENV["R2_ENDPOINT"] %>
  bucket: <%= Rails.application.credentials.dig(:r2, :bucket) || ENV.fetch("R2_BUCKET", "crewcert") %>
  region: <%= Rails.application.credentials.dig(:r2, :region) || ENV.fetch("R2_REGION", "auto") %>
  force_path_style: true
  request_checksum_calculation: when_required
  response_checksum_validation: when_required
